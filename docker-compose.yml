version: '3.3'
services:
  pythonscript:
    restart: on-failure
    build: 
      context: ./Flask
      dockerfile: Dockerfile
    ports: 
      - "5000:5000"
    depends_on: 
      - redis
    networks:
      - appnet
    container_name: pythonscript
  redis:
    image: redis:alpine
    networks:
      - appnet
    container_name: redis
  proxy:
    build: 
      context: ./Proxy
      dockerfile: Dockerfile
    depends_on: 
      - pythonscript
      - static
    ports: 
      - "8080:80"
    networks: 
      - appnet
    container_name: proxy
  static:
    build: 
      context: ./Static
      dockerfile: Dockerfile
    container_name: static
    ports: 
      - "3333:80"
    networks: 
      - appnet
networks:
  appnet:
    driver: bridge
